(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{9245:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/key-manager",function(){return n(1988)}])},1988:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return f}});var i=n(5893),t=n(9008),c=n.n(t),a=n(7568),r=n(655),o=n(7294),l=JSON.parse('{"M":[{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"uint256","name":"_channel","type":"uint256"}],"name":"getNonce","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]}'),d=n(3538),u=function(){var e=(0,o.useContext)(d.J).web3,s=(0,o.useState)(""),n=s[0],t=s[1],c=(0,o.useState)(""),u=c[0],m=c[1],h=(0,o.useState)(""),p=h[0],f=h[1],N=(0,o.useState)(""),x=N[0],E=N[1],j=(0,o.useState)(!1),v=j[0],C=j[1],S=(0,o.useState)(!1),y=S[0],P=S[1],g=function(){var s=(0,a.Z)((function(){var s,i,t,c;return(0,r.__generator)(this,(function(a){switch(a.label){case 0:return e?[4,(s=new e.eth.Contract(l.M,e.utils.toChecksumAddress(n))).methods.supportsInterface("0x6f4df48b").call()]:[2];case 1:return i=a.sent(),[4,s.methods.supportsInterface("0xc403d48f").call()];case 2:return t=a.sent(),i||t?[4,s.methods.getNonce(u,p).call()]:[3,4];case 3:return c=a.sent(),E(c),C(!0),P(!1),[3,5];case 4:C(!1),P(!0),a.label=5;case 5:return[2]}}))}));return function(){return s.apply(this,arguments)}}();return(0,i.jsxs)("div",{className:"container mt-5",children:[(0,i.jsx)("h2",{className:"title is-2",children:"Nonce"}),(0,i.jsxs)("p",{children:["Retrieve the nonce of an ",(0,i.jsx)("code",{children:"address"})," for a specific Key Manager."]}),(0,i.jsxs)("div",{className:"columns mt-2",children:[(0,i.jsx)("div",{className:"column",children:(0,i.jsx)("div",{className:"field",children:(0,i.jsxs)("p",{className:"control has-icons-left",children:[(0,i.jsx)("input",{className:"input",type:"text",placeholder:"Key Manager address",onChange:function(e){t(e.target.value)}}),(0,i.jsx)("span",{className:"icon is-small is-left",children:"\ud83d\udd10"})]})})}),(0,i.jsx)("div",{className:"column",children:(0,i.jsx)("div",{className:"field",children:(0,i.jsxs)("p",{className:"control has-icons-left",children:[(0,i.jsx)("input",{className:"input",type:"text",placeholder:"Caller address",onChange:function(e){return m(e.target.value)}}),(0,i.jsx)("span",{className:"icon is-small is-left",children:"\u27a1\ufe0f "})]})})}),(0,i.jsx)("div",{className:"column",children:(0,i.jsx)("div",{className:"field",children:(0,i.jsxs)("p",{className:"control has-icons-left",children:[(0,i.jsx)("input",{className:"input",type:"text",placeholder:"Channel ID",onChange:function(e){return f(e.target.value)}}),(0,i.jsx)("span",{className:"icon is-small is-left",children:"\ud83d\udeaa"})]})})}),(0,i.jsx)("div",{className:"column",children:(0,i.jsx)("button",{className:"button is-success",onClick:(0,a.Z)((function(){return(0,r.__generator)(this,(function(e){switch(e.label){case 0:return[4,g()];case 1:return e.sent(),[2]}}))})),children:"Get Nonce"})})]}),(0,i.jsxs)("div",{className:"notification is-danger is-light",style:{display:y?"block":"none"},children:["address ",(0,i.jsx)("code",{children:n})," is not a KeyManager"]}),(0,i.jsxs)("div",{className:"notification is-success is-light",style:{display:v?"block":"none"},children:["Nonce = ",(0,i.jsx)("code",{children:x})]})]})},m=n(6060),h=function(e){var s=e.permissions,n=e.color,t=e.decodedPermissions,c=e.handlePermissionClick;return(0,i.jsx)("div",{className:"buttons",children:s.map((function(e){return(0,i.jsx)("button",{className:"button ".concat(n," ").concat(!t[e]&&"is-outlined"),onClick:function(s){s.preventDefault(),c(e)},children:e},e)}))})},p=function(){var e="0x0000000000000000000000000000000000000000000000000000000000000001",s=(0,o.useState)(e),n=s[0],t=s[1],c=(0,o.useState)(m.ZP.decodePermissions(e)),a=c[0],r=c[1],l=function(e){console.log("updatedDecodedPermissions",e);var s=a;s[e]=!s[e],r(s),t(m.ZP.encodePermissions(s))};return(0,i.jsxs)("div",{className:"container",children:[(0,i.jsx)("h2",{className:"title is-2",children:"Permissions"}),(0,i.jsx)("article",{className:"message is-info",children:(0,i.jsxs)("div",{className:"message-body",children:["This tool will encode/decode permissions according to"," ",(0,i.jsx)("a",{href:"https://docs.lukso.tech/standards/universal-profile/lsp6-key-manager",children:"LSP6 KeyManager Standard"})," ","smart contract and attempt to match them with their"," ",(0,i.jsx)("a",{href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md",children:"LSP2 ERC725YJSONSchema"}),".",(0,i.jsx)("br",{}),"The erc725.js lib provides a"," ",(0,i.jsx)("a",{href:"https://docs.lukso.tech/tools/erc725js/classes/ERC725#encodepermissions",children:"decodePermissions"})," ","method to decode the permissions."]})}),(0,i.jsx)("div",{className:"columns",children:(0,i.jsx)("div",{className:"column",children:(0,i.jsx)("input",{className:"input is-medium",type:"text",placeholder:"0x0000000000000000000000000000000000000000000000000000000000000001",value:n,onChange:function(e){return function(e){try{t(e),r(m.ZP.decodePermissions(e))}catch(s){console.log(s.message)}}(e.target.value)}})})}),(0,i.jsx)("div",{className:"columns",children:(0,i.jsxs)("div",{className:"column",children:[(0,i.jsx)(h,{permissions:["CHANGEOWNER","ADDCONTROLLER","CHANGEPERMISSIONS","ADDEXTENSIONS","CHANGEEXTENSIONS"],color:"is-info",decodedPermissions:a,handlePermissionClick:l}),(0,i.jsx)(h,{permissions:["ADDUNIVERSALRECEIVERDELEGATE","CHANGEUNIVERSALRECEIVERDELEGATE","REENTRANCY","SUPER_TRANSFERVALUE","TRANSFERVALUE"],color:"is-warning",decodedPermissions:a,handlePermissionClick:l}),(0,i.jsx)(h,{permissions:["SUPER_CALL","CALL","SUPER_STATICCALL","STATICCALL","SUPER_DELEGATECALL"],color:"is-primary",decodedPermissions:a,handlePermissionClick:l}),(0,i.jsx)(h,{permissions:["DELEGATECALL","DEPLOY","SUPER_SETDATA","SETDATA","ENCRYPT","DECRYPT","SIGN"],color:"is-danger ",decodedPermissions:a,handlePermissionClick:l})]})}),(0,i.jsx)("div",{className:"columns",children:(0,i.jsx)("div",{className:"column",children:(0,i.jsx)("pre",{children:JSON.stringify(a,void 0,2)})})})]})},f=function(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(c(),{children:(0,i.jsx)("title",{children:"Key Manager - ERC725 Tools"})}),(0,i.jsx)(p,{}),(0,i.jsx)(u,{})]})}},9008:function(e,s,n){e.exports=n(5443)},6601:function(){},9214:function(){},5568:function(){},2361:function(){},4616:function(){},7568:function(e,s,n){"use strict";function i(e,s,n,i,t,c,a){try{var r=e[c](a),o=r.value}catch(l){return void n(l)}r.done?s(o):Promise.resolve(o).then(i,t)}function t(e){return function(){var s=this,n=arguments;return new Promise((function(t,c){var a=e.apply(s,n);function r(e){i(a,t,c,r,o,"next",e)}function o(e){i(a,t,c,r,o,"throw",e)}r(void 0)}))}}n.d(s,{Z:function(){return t}})}},function(e){e.O(0,[60,774,888,179],(function(){return s=9245,e(e.s=s);var s}));var s=e.O();_N_E=s}]);