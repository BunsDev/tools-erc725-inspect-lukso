(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{59245:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/key-manager",function(){return n(87744)}])},87744:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return N}});var t=n(85893),i=n(9008),a=n.n(i),c=n(34051),r=n.n(c),o=n(67294),l=JSON.parse('{"M":[{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"uint256","name":"_channel","type":"uint256"}],"name":"getNonce","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]}'),d=n(94784);function u(e,s,n,t,i,a,c){try{var r=e[a](c),o=r.value}catch(l){return void n(l)}r.done?s(o):Promise.resolve(o).then(t,i)}function m(e){return function(){var s=this,n=arguments;return new Promise((function(t,i){var a=e.apply(s,n);function c(e){u(a,t,i,c,r,"next",e)}function r(e){u(a,t,i,c,r,"throw",e)}c(void 0)}))}}var h=function(){var e=(0,o.useContext)(d.J).web3,s=(0,o.useState)(""),n=s[0],i=s[1],a=(0,o.useState)(""),c=a[0],u=a[1],h=(0,o.useState)(""),p=h[0],x=h[1],f=(0,o.useState)(""),N=f[0],j=f[1],v=(0,o.useState)(!1),y=v[0],P=v[1],S=(0,o.useState)(!1),C=S[0],E=S[1],g=function(){var s=m(r().mark((function s(){var t,i,a,o;return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=2;break}return s.abrupt("return");case 2:return t=new e.eth.Contract(l.M,e.utils.toChecksumAddress(n)),s.next=5,t.methods.supportsInterface("0x6f4df48b").call();case 5:return i=s.sent,s.next=8,t.methods.supportsInterface("0xc403d48f").call();case 8:if(a=s.sent,!i&&!a){s.next=18;break}return s.next=12,t.methods.getNonce(c,p).call();case 12:o=s.sent,j(o),P(!0),E(!1),s.next=19;break;case 18:P(!1),E(!0);case 19:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return(0,t.jsxs)("div",{className:"container mt-5",children:[(0,t.jsx)("h2",{className:"title is-2",children:"Nonce"}),(0,t.jsxs)("p",{children:["Retrieve the nonce of an ",(0,t.jsx)("code",{children:"address"})," for a specific Key Manager."]}),(0,t.jsxs)("div",{className:"columns mt-2",children:[(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("p",{className:"control has-icons-left",children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Key Manager address",onChange:function(e){i(e.target.value)}}),(0,t.jsx)("span",{className:"icon is-small is-left",children:"\ud83d\udd10"})]})})}),(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("p",{className:"control has-icons-left",children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Caller address",onChange:function(e){return u(e.target.value)}}),(0,t.jsx)("span",{className:"icon is-small is-left",children:"\u27a1\ufe0f "})]})})}),(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("p",{className:"control has-icons-left",children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Channel ID",onChange:function(e){return x(e.target.value)}}),(0,t.jsx)("span",{className:"icon is-small is-left",children:"\ud83d\udeaa"})]})})}),(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("button",{className:"button is-success",onClick:m(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)}))),children:"Get Nonce"})})]}),(0,t.jsxs)("div",{className:"notification is-danger is-light",style:{display:C?"block":"none"},children:["address ",(0,t.jsx)("code",{children:n})," is not a KeyManager"]}),(0,t.jsxs)("div",{className:"notification is-success is-light",style:{display:y?"block":"none"},children:["Nonce = ",(0,t.jsx)("code",{children:N})]})]})},p=n(316),x=function(e){var s=e.permissions,n=e.color,i=e.decodedPermissions,a=e.handlePermissionClick;return(0,t.jsx)("div",{className:"buttons",children:s.map((function(e){return(0,t.jsx)("button",{className:"button ".concat(n," ").concat(!i[e]&&"is-outlined"),onClick:function(s){s.preventDefault(),a(e)},children:e},e)}))})},f=function(){var e="0x0000000000000000000000000000000000000000000000000000000000000001",s=(0,o.useState)(e),n=s[0],i=s[1],a=(0,o.useState)(p.ZP.decodePermissions(e)),c=a[0],r=a[1],l=function(e){console.log("updatedDecodedPermissions",e);var s=c;s[e]=!s[e],r(s),i(p.ZP.encodePermissions(s))};return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h2",{className:"title is-2",children:"Permissions"}),(0,t.jsx)("article",{className:"message is-info",children:(0,t.jsxs)("div",{className:"message-body",children:["This tool will encode/decode permissions according to"," ",(0,t.jsx)("a",{href:"https://docs.lukso.tech/standards/universal-profile/lsp6-key-manager",children:"LSP6 KeyManager Standard"})," ","smart contract and attempt to match them with their"," ",(0,t.jsx)("a",{href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md",children:"LSP2 ERC725YJSONSchema"}),".",(0,t.jsx)("br",{}),"The erc725.js lib provides a"," ",(0,t.jsx)("a",{href:"https://docs.lukso.tech/tools/erc725js/classes/ERC725#encodepermissions",children:"decodePermissions"})," ","method to decode the permissions."]})}),(0,t.jsx)("div",{className:"columns",children:(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("input",{className:"input is-medium",type:"text",placeholder:"0x0000000000000000000000000000000000000000000000000000000000000001",value:n,onChange:function(e){return function(e){try{i(e),r(p.ZP.decodePermissions(e))}catch(s){console.log(s.message)}}(e.target.value)}})})}),(0,t.jsx)("div",{className:"columns",children:(0,t.jsxs)("div",{className:"column",children:[(0,t.jsx)(x,{permissions:["SETDATA","SIGN","ENCRYPT"],color:"is-info",decodedPermissions:c,handlePermissionClick:l}),(0,t.jsx)(x,{permissions:["STATICCALL","CALL","DELEGATECALL","DEPLOY","TRANSFERVALUE"],color:"is-warning",decodedPermissions:c,handlePermissionClick:l}),(0,t.jsx)(x,{permissions:["CHANGEOWNER","CHANGEPERMISSIONS","ADDPERMISSIONS"],color:"is-primary",decodedPermissions:c,handlePermissionClick:l}),(0,t.jsx)(x,{permissions:["SUPER_SETDATA","SUPER_TRANSFERVALUE","SUPER_CALL","SUPER_STATICCALL","SUPER_DELEGATECALL"],color:"is-danger ",decodedPermissions:c,handlePermissionClick:l})]})}),(0,t.jsx)("div",{className:"columns",children:(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("pre",{children:JSON.stringify(c,void 0,2)})})})]})},N=function(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(a(),{children:(0,t.jsx)("title",{children:"Key Manager - ERC725 Tools"})}),(0,t.jsx)(f,{}),(0,t.jsx)(h,{})]})}},9008:function(e,s,n){e.exports=n(83121)}},function(e){e.O(0,[316,774,888,179],(function(){return s=59245,e(e.s=s);var s}));var s=e.O();_N_E=s}]);