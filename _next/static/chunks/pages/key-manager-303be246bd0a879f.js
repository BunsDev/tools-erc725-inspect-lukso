(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[630],{59245:function(e,s,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/key-manager",function(){return n(13484)}])},13484:function(e,s,n){"use strict";n.r(s),n.d(s,{default:function(){return x}});var t=n(85893),a=n(9008),i=n.n(a),c=n(34051),r=n.n(c),l=n(67294),o=JSON.parse('{"M":[{"inputs":[{"internalType":"address","name":"_from","type":"address"},{"internalType":"uint256","name":"_channel","type":"uint256"}],"name":"getNonce","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]}'),u=n(94784);function d(e,s,n,t,a,i,c){try{var r=e[i](c),l=r.value}catch(o){return void n(o)}r.done?s(l):Promise.resolve(l).then(t,a)}function h(e){return function(){var s=this,n=arguments;return new Promise((function(t,a){var i=e.apply(s,n);function c(e){d(i,t,a,c,r,"next",e)}function r(e){d(i,t,a,c,r,"throw",e)}c(void 0)}))}}var m=function(){var e=(0,l.useContext)(u.J).web3,s=(0,l.useState)(""),n=s[0],a=s[1],i=(0,l.useState)(""),c=i[0],d=i[1],m=(0,l.useState)(""),p=m[0],f=m[1],x=(0,l.useState)(""),N=x[0],j=x[1],v=(0,l.useState)(!1),S=v[0],y=v[1],b=(0,l.useState)(!1),E=b[0],C=b[1],g=function(){var s=h(r().mark((function s(){var t,a,i,l;return r().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(e){s.next=2;break}return s.abrupt("return");case 2:return t=new e.eth.Contract(o.M,e.utils.toChecksumAddress(n)),s.next=5,t.methods.supportsInterface("0x6f4df48b").call();case 5:return a=s.sent,s.next=8,t.methods.supportsInterface("0xc403d48f").call();case 8:if(i=s.sent,!a&&!i){s.next=18;break}return s.next=12,t.methods.getNonce(c,p).call();case 12:l=s.sent,j(l),y(!0),C(!1),s.next=19;break;case 18:y(!1),C(!0);case 19:case"end":return s.stop()}}),s)})));return function(){return s.apply(this,arguments)}}();return(0,t.jsxs)("div",{className:"container mt-5",children:[(0,t.jsx)("h2",{className:"title is-2",children:"Nonce"}),(0,t.jsxs)("p",{children:["Retrieve the nonce of an ",(0,t.jsx)("code",{children:"address"})," for a specific Key Manager."]}),(0,t.jsxs)("div",{className:"columns mt-2",children:[(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("p",{className:"control has-icons-left",children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Key Manager address",onChange:function(e){a(e.target.value)}}),(0,t.jsx)("span",{className:"icon is-small is-left",children:"\ud83d\udd10"})]})})}),(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("p",{className:"control has-icons-left",children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Caller address",onChange:function(e){return d(e.target.value)}}),(0,t.jsx)("span",{className:"icon is-small is-left",children:"\u27a1\ufe0f "})]})})}),(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("div",{className:"field",children:(0,t.jsxs)("p",{className:"control has-icons-left",children:[(0,t.jsx)("input",{className:"input",type:"text",placeholder:"Channel ID",onChange:function(e){return f(e.target.value)}}),(0,t.jsx)("span",{className:"icon is-small is-left",children:"\ud83d\udeaa"})]})})}),(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("button",{className:"button is-success",onClick:h(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:case"end":return e.stop()}}),e)}))),children:"Get Nonce"})})]}),(0,t.jsxs)("div",{className:"notification is-danger is-light",style:{display:E?"block":"none"},children:["address ",(0,t.jsx)("code",{children:n})," is not a KeyManager"]}),(0,t.jsxs)("div",{className:"notification is-success is-light",style:{display:S?"block":"none"},children:["Nonce = ",(0,t.jsx)("code",{children:N})]})]})},p=n(316),f=function(){var e=(0,l.useState)("0x0000000000000000000000000000000000000000000000000000000000000001"),s=e[0],n=e[1],a=(0,l.useState)({CHANGEOWNER:!0,CHANGEPERMISSIONS:!1,ADDPERMISSIONS:!1,SETDATA:!1,CALL:!1,STATICCALL:!1,DELEGATECALL:!1,DEPLOY:!1,TRANSFERVALUE:!1,SIGN:!1}),i=a[0],c=a[1],r=function(e){var s=i;s[e]=!s[e],c(s),n(p.ZP.encodePermissions(s))};return(0,t.jsxs)("div",{className:"container",children:[(0,t.jsx)("h2",{className:"title is-2",children:"Permissions"}),(0,t.jsx)("article",{className:"message is-info",children:(0,t.jsxs)("div",{className:"message-body",children:["This tool will encode/decode permissions according to"," ",(0,t.jsx)("a",{href:"https://docs.lukso.tech/standards/universal-profile/lsp6-key-manager",children:"LSP6 KeyManager Standard"})," ","smart contract and attempt to match them with their"," ",(0,t.jsx)("a",{href:"https://github.com/lukso-network/LIPs/blob/main/LSPs/LSP-2-ERC725YJSONSchema.md",children:"LSP2 ERC725YJSONSchema"}),".",(0,t.jsx)("br",{}),"The erc725.js lib provides a"," ",(0,t.jsx)("a",{href:"https://docs.lukso.tech/tools/erc725js/classes/ERC725#encodepermissions",children:"decodePermissions"})," ","method to decode the permissions."]})}),(0,t.jsx)("div",{className:"columns",children:(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("input",{className:"input is-medium",type:"text",placeholder:"0x0000000000000000000000000000000000000000000000000000000000000001",value:s,onChange:function(e){return function(e){try{n(e),c(p.ZP.decodePermissions(e))}catch(s){console.log(s.message)}}(e.target.value)}})})}),(0,t.jsx)("div",{className:"columns",children:(0,t.jsxs)("div",{className:"column",children:[(0,t.jsx)("div",{className:"buttons",children:["SETDATA","SIGN"].map((function(e){return(0,t.jsx)("button",{className:"button is-info ".concat(!i[e]&&"is-outlined"),onClick:function(s){s.preventDefault(),r(e)},children:e},e)}))}),(0,t.jsx)("div",{className:"buttons",children:["STATICCALL","CALL","DELEGATECALL","DEPLOY","TRANSFERVALUE"].map((function(e){return(0,t.jsx)("button",{className:"button is-warning ".concat(!i[e]&&"is-outlined"),onClick:function(){r(e)},children:e},e)}))}),(0,t.jsx)("div",{className:"buttons",children:["CHANGEOWNER","CHANGEPERMISSIONS","ADDPERMISSIONS"].map((function(e){return(0,t.jsx)("button",{className:"button is-danger ".concat(!i[e]&&"is-outlined"),onClick:function(){r(e)},children:e},e)}))})]})}),(0,t.jsx)("div",{className:"columns",children:(0,t.jsx)("div",{className:"column",children:(0,t.jsx)("pre",{children:JSON.stringify(i,void 0,2)})})})]})},x=function(){return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i(),{children:(0,t.jsx)("title",{children:"Key Manager - ERC725 Tools"})}),(0,t.jsx)(f,{}),(0,t.jsx)(m,{})]})}},9008:function(e,s,n){e.exports=n(83121)}},function(e){e.O(0,[316,774,888,179],(function(){return s=59245,e(e.s=s);var s}));var s=e.O();_N_E=s}]);